@model E_Commerce_Mezzex.Models.Domain.Product

@{
    ViewBag.Title = "Create Product";
}

<h2>Create Product</h2>

<ul class="nav nav-tabs" id="custom-tabs-three-tab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="custom-tabs-three-home-tab" data-toggle="pill" href="#custom-tabs-three-home" role="tab" aria-controls="custom-tabs-three-home" aria-selected="true">Product Details</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="custom-tabs-three-seo-tab" data-toggle="pill" href="#custom-tabs-three-seo" role="tab" aria-controls="custom-tabs-three-seo" aria-selected="false">SEO Information</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="custom-tabs-three-related-products-tab" data-toggle="pill" href="#custom-tabs-three-related-products" role="tab" aria-controls="custom-tabs-three-related-products" aria-selected="false">Related Products</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="custom-tabs-three-multimedia-tab" data-toggle="pill" href="#custom-tabs-three-multimedia" role="tab" aria-controls="custom-tabs-three-multimedia" aria-selected="false">Multimedia</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="custom-tabs-three-variation-tab" data-toggle="pill" href="#custom-tabs-three-variation" role="tab" aria-controls="custom-tabs-three-variation" aria-selected="false">Variation Value</a>
    </li>
    @* <li class="nav-item">
    <a class="nav-link disabled" id="custom-tabs-three-variation1-tab" data-toggle="pill" href="#custom-tabs-three-variation1" role="tab" aria-controls="custom-tabs-three-variation1" aria-selected="false">Variation Type</a>
    </li> *@
</ul>

<form id="productForm" asp-action="AddProduct" method="post">
    <div class="tab-content mt-3" id="custom-tabs-three-tabContent">
        <div class="tab-pane fade show active" id="custom-tabs-three-home" role="tabpanel" aria-labelledby="custom-tabs-three-home-tab">
            @await Html.PartialAsync("_ProductDetails", Model)
        </div>
        <div class="tab-pane fade" id="custom-tabs-three-seo" role="tabpanel" aria-labelledby="custom-tabs-three-seo-tab">
            @await Html.PartialAsync("_SEOInformation", Model)
        </div>
        <div class="tab-pane fade" id="custom-tabs-three-related-products" role="tabpanel" aria-labelledby="custom-tabs-three-related-products-tab">
            @await Html.PartialAsync("_RelatedProducts", Model)
        </div>
        <div class="tab-pane fade" id="custom-tabs-three-multimedia" role="tabpanel" aria-labelledby="custom-tabs-three-multimedia-tab">
            <!-- Multimedia content will be dynamically added here after product is added -->
        </div>
        <div class="tab-pane fade" id="custom-tabs-three-variation1" role="tabpanel" aria-labelledby="custom-tabs-three-variation1-tab">
            @await Html.PartialAsync("_AddVariationTypeModal", new E_Commerce_Mezzex.Models.Domain.VariationType())
        </div>
        <div class="tab-pane fade" id="custom-tabs-three-variation" role="tabpanel" aria-labelledby="custom-tabs-three-variation-tab">
             @await Html.PartialAsync("_VariationValueForm", new E_Commerce_Mezzex.Models.ViewModel.VariationViewModel { ProductId = Model.Id })
        </div>
    </div>
</form>

<div>
    <a asp-action="Index" class="btn btn-secondary mt-3 mb-3">Back to List</a>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(document).ready(function () {
            $('#relatedProductsTable').DataTable({
                "paging": true,
                "lengthChange": true,
                "searching": true,
                "ordering": true,
                "info": true,
                "autoWidth": false,
                "responsive": true,
                "language": {
                    "paginate": {
                        "previous": "Previous",
                        "next": "Next"
                    }
                },
                "order": [[1, 'asc']], // Default sorting on the second column (Product Name) in ascending order
                "columnDefs": [
                    { "orderable": true, "targets": [1] }, // Enable sorting on the Product Name column
                    { "orderable": false, "targets": [0, 2] } // Disable sorting on Select and Publish Status columns
                ]
            });
        });
    </script>
    <script src="~/js/multimedia-handler.js"></script>
    <script src="~/js/variation-handler.js"></script>
    <script src="~/js/product-form.js"></script>
}